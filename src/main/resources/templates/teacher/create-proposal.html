<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/layout :: head}"></head>
<body class="d-flex flex-column min-vh-100">
    <!-- Header -->
    <header th:replace="~{fragments/layout :: header}"></header>

    <!-- Main Content -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a th:href="@{/teacher/dashboard}">
                                    <i class="bi bi-house me-1"></i>Dashboard
                                </a>
                            </li>
                            <li class="breadcrumb-item">
                                <a th:href="@{/teacher/proposals}">Proposals</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">Create New</li>
                        </ol>
                    </nav>
                    <h2 class="display-6 fw-bold text-primary">
                        <i class="bi bi-plus-circle me-3"></i>Create New Thesis Proposal
                    </h2>
                    <p class="text-muted">Create a new thesis proposal that students can apply for.</p>
                </div>
            </div>

            <!-- Form -->
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-light">
                            <h5 class="card-title mb-0">
                                <i class="bi bi-file-earmark-text me-2"></i>Proposal Information
                            </h5>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/teacher/proposals/create}" 
                                  th:object="${proposal}" 
                                  method="post" 
                                  class="needs-validation" 
                                  novalidate>
                                
                                <!-- Title -->
                                <div class="mb-4">
                                    <label for="title" class="form-label fw-bold">
                                        <i class="bi bi-card-heading me-1"></i>Thesis Title *
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="title" 
                                           th:field="*{title}"
                                           th:classappend="${#fields.hasErrors('title')} ? 'is-invalid'"
                                           placeholder="Enter a clear and descriptive thesis title"
                                           required>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('title')}" th:errors="*{title}">
                                        Please provide a valid title.
                                    </div>
                                    <div class="form-text">
                                        Choose a title that clearly represents the research area and scope.
                                    </div>
                                </div>

                                <!-- Goal -->
                                <div class="mb-4">
                                    <label for="goal" class="form-label fw-bold">
                                        <i class="bi bi-bullseye me-1"></i>Research Goal *
                                    </label>
                                    <textarea class="form-control" 
                                              id="goal" 
                                              th:field="*{goal}"
                                              th:classappend="${#fields.hasErrors('goal')} ? 'is-invalid'"
                                              rows="4" 
                                              placeholder="Describe the main goal and purpose of this thesis research"
                                              required></textarea>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('goal')}" th:errors="*{goal}">
                                        Please provide a research goal.
                                    </div>
                                    <div class="form-text">
                                        Explain what the student will achieve by completing this thesis.
                                    </div>
                                </div>

                                <!-- Objectives -->
                                <div class="mb-4">
                                    <label for="objectives" class="form-label fw-bold">
                                        <i class="bi bi-list-check me-1"></i>Specific Objectives *
                                    </label>
                                    <textarea class="form-control" 
                                              id="objectives" 
                                              th:field="*{objectives}"
                                              th:classappend="${#fields.hasErrors('objectives')} ? 'is-invalid'"
                                              rows="5" 
                                              placeholder="List the specific objectives and deliverables for this thesis"
                                              required></textarea>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('objectives')}" th:errors="*{objectives}">
                                        Please provide specific objectives.
                                    </div>
                                    <div class="form-text">
                                        Break down the main goal into specific, measurable objectives.
                                    </div>
                                </div>

                                <!-- Technology -->
                                <div class="mb-4">
                                    <label for="technology" class="form-label fw-bold">
                                        <i class="bi bi-gear me-1"></i>Technologies & Tools *
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="technology" 
                                           th:field="*{technology}"
                                           th:classappend="${#fields.hasErrors('technology')} ? 'is-invalid'"
                                           placeholder="e.g., Java, Spring Boot, React, PostgreSQL, Docker"
                                           required>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('technology')}" th:errors="*{technology}">
                                        Please specify the technologies to be used.
                                    </div>
                                    <div class="form-text">
                                        List the programming languages, frameworks, tools, and technologies that will be used. Separate with commas.
                                    </div>
                                </div>

                                <!-- Submit Buttons -->
                                <div class="d-flex gap-3 pt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-circle me-2"></i>Create Proposal
                                    </button>
                                    <a th:href="@{/teacher/proposals}" class="btn btn-outline-secondary">
                                        <i class="bi bi-x-circle me-2"></i>Cancel
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Help Sidebar -->
                <div class="col-lg-4 mt-4 mt-lg-0">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-info text-white">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-lightbulb me-2"></i>Tips for Creating Proposals
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="small">
                                <div class="mb-3">
                                    <h6 class="fw-bold">Title Guidelines</h6>
                                    <p class="text-muted mb-0">Keep it concise but descriptive. Include the main technology or domain.</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h6 class="fw-bold">Research Goal</h6>
                                    <p class="text-muted mb-0">Clearly state what problem the thesis will solve or what will be built/researched.</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h6 class="fw-bold">Objectives</h6>
                                    <p class="text-muted mb-0">Break down the goal into specific, measurable tasks. Use bullet points or numbered lists.</p>
                                </div>
                                
                                <div class="mb-0">
                                    <h6 class="fw-bold">Technologies</h6>
                                    <p class="text-muted mb-0">List all relevant technologies, frameworks, and tools the student should know or learn.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card border-0 shadow-sm mt-4">
                        <div class="card-header bg-warning text-dark">
                            <h6 class="card-title mb-0">
                                <i class="bi bi-info-circle me-2"></i>Important Notes
                            </h6>
                        </div>
                        <div class="card-body">
                            <ul class="small text-muted mb-0">
                                <li class="mb-2">Once created, the proposal will be visible to all students</li>
                                <li class="mb-2">Students can apply for your proposals</li>
                                <li class="mb-2">You can edit proposals until they are approved</li>
                                <li class="mb-0">Consider the scope appropriate for a thesis timeframe</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>
