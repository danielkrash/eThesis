<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title}">Create Thesis Proposal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>
<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="bi bi-file-earmark-plus"></i>
                            Create New Thesis Proposal
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i>
                            <strong>Instructions:</strong> Please fill out all required fields. You can only submit one proposal per teacher.
                            Your proposal will be reviewed by the selected teacher.
                        </div>

                        <form th:action="@{/proposals/create}" th:object="${createProposalForm}" method="post">
                            <!-- Title Field -->
                            <div class="mb-3">
                                <label for="title" class="form-label">
                                    <strong>Title</strong> <span class="text-danger">*</span>
                                </label>
                                <input type="text" 
                                       class="form-control" 
                                       id="title" 
                                       th:field="*{title}"
                                       th:class="${#fields.hasErrors('title')} ? 'form-control is-invalid' : 'form-control'"
                                       placeholder="Enter the title of your thesis proposal">
                                <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback">
                                    <span th:errors="*{title}">Title error</span>
                                </div>
                            </div>

                            <!-- Department Selection -->
                            <div class="mb-3">
                                <label for="departmentId" class="form-label">
                                    <strong>Department</strong> <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" 
                                        id="departmentId" 
                                        th:field="*{departmentId}"
                                        th:class="${#fields.hasErrors('departmentId')} ? 'form-select is-invalid' : 'form-select'">
                                    <option value="">Select a department...</option>
                                    <option th:each="dept : ${departments}" 
                                            th:value="${dept.id}" 
                                            th:text="${dept.name}">Department Name</option>
                                </select>
                                <div th:if="${#fields.hasErrors('departmentId')}" class="invalid-feedback">
                                    <span th:errors="*{departmentId}">Department error</span>
                                </div>
                                <div class="form-text">Select the department where you want to submit your proposal.</div>
                            </div>

                            <!-- Teacher Selection -->
                            <div class="mb-3">
                                <label for="teacherId" class="form-label">
                                    <strong>Preferred Teacher</strong> <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" 
                                        id="teacherId" 
                                        th:field="*{teacherId}"
                                        th:class="${#fields.hasErrors('teacherId')} ? 'form-select is-invalid' : 'form-select'">
                                    <option value="">Select a teacher...</option>
                                    <option th:each="teacher : ${teachers}" 
                                            th:value="${teacher.id}" 
                                            th:text="${teacher.user.firstName + ' ' + teacher.user.lastName}">Teacher Name</option>
                                </select>
                                <div th:if="${#fields.hasErrors('teacherId')}" class="invalid-feedback">
                                    <span th:errors="*{teacherId}">Teacher error</span>
                                </div>
                                <div class="form-text">Choose the teacher you would like to supervise your thesis.</div>
                            </div>

                            <!-- Goal Field -->
                            <div class="mb-3">
                                <label for="goal" class="form-label">
                                    <strong>Goal</strong> <span class="text-danger">*</span>
                                </label>
                                <textarea class="form-control" 
                                          id="goal" 
                                          rows="4"
                                          th:field="*{goal}"
                                          th:class="${#fields.hasErrors('goal')} ? 'form-control is-invalid' : 'form-control'"
                                          placeholder="Describe the main goal of your thesis..."></textarea>
                                <div th:if="${#fields.hasErrors('goal')}" class="invalid-feedback">
                                    <span th:errors="*{goal}">Goal error</span>
                                </div>
                            </div>

                            <!-- Objectives Field -->
                            <div class="mb-3">
                                <label for="objectives" class="form-label">
                                    <strong>Objectives</strong> <span class="text-danger">*</span>
                                </label>
                                <textarea class="form-control" 
                                          id="objectives" 
                                          rows="4"
                                          th:field="*{objectives}"
                                          th:class="${#fields.hasErrors('objectives')} ? 'form-control is-invalid' : 'form-control'"
                                          placeholder="List the specific objectives of your thesis..."></textarea>
                                <div th:if="${#fields.hasErrors('objectives')}" class="invalid-feedback">
                                    <span th:errors="*{objectives}">Objectives error</span>
                                </div>
                            </div>

                            <!-- Technology Field -->
                            <div class="mb-3">
                                <label for="technology" class="form-label">
                                    <strong>Technology</strong> <span class="text-danger">*</span>
                                </label>
                                <textarea class="form-control" 
                                          id="technology" 
                                          rows="3"
                                          th:field="*{technology}"
                                          th:class="${#fields.hasErrors('technology')} ? 'form-control is-invalid' : 'form-control'"
                                          placeholder="Describe the technologies, tools, and methods you plan to use..."></textarea>
                                <div th:if="${#fields.hasErrors('technology')}" class="invalid-feedback">
                                    <span th:errors="*{technology}">Technology error</span>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="d-flex justify-content-between">
                                <a href="/dashboard" class="btn btn-secondary">
                                    <i class="bi bi-arrow-left"></i> Cancel
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-check-lg"></i> Submit Proposal
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
